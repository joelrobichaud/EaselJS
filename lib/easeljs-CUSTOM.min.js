/*
* EaselJS
* Visit http://createjs.com/ for documentation, updates and examples.
*
* Copyright (c) 2011 gskinner.com, inc.
* 
* Distributed under the terms of the MIT license.
* http://www.opensource.org/licenses/mit-license.html
*
* This notice shall be included in all copies or substantial portions of the Software.
*/
(function(g){var c=function(){throw"UID cannot be instantiated";};c._nextID=0;c.get=function(){return c._nextID++};g.UID=c})(window);(function(g){var c=function(){throw"Ticker cannot be instantiated.";};c.useRAF=null;c.animationTarget=null;c._listeners=null;c._pauseable=null;c._paused=!1;c._inited=!1;c._startTime=0;c._pausedTime=0;c._ticks=0;c._pausedTickers=0;c._interval=50;c._lastTime=0;c._times=null;c._tickTimes=null;c._rafActive=!1;c._timeoutID=null;c.addListener=function(a,b){null!=a&&(c._inited||c.init(),c.removeListener(a),c._pauseable[c._listeners.length]=null==b?!0:b,c._listeners.push(a))};c.init=function(){c._inited=
!0;c._times=[];c._tickTimes=[];c._pauseable=[];c._listeners=[];c._times.push(c._lastTime=c._startTime=c._getTime());c.setInterval(c._interval)};c.removeListener=function(a){null!=c._listeners&&(a=c._listeners.indexOf(a),-1!=a&&(c._listeners.splice(a,1),c._pauseable.splice(a,1)))};c.removeAllListeners=function(){c._listeners=[];c._pauseable=[]};c.setInterval=function(a){c._interval=a;c._inited&&c._setupTick()};c.getInterval=function(){return c._interval};c.setFPS=function(a){c.setInterval(1E3/a)};
c.getFPS=function(){return 1E3/c._interval};c.getMeasuredFPS=function(a){if(2>c._times.length)return-1;null==a&&(a=c.getFPS()|0);a=Math.min(c._times.length-1,a);return 1E3/((c._times[0]-c._times[a])/a)};c.setPaused=function(a){c._paused=a};c.getPaused=function(){return c._paused};c.getTime=function(a){return c._getTime()-c._startTime-(a?c._pausedTime:0)};c.getTicks=function(a){return c._ticks-(a?c._pausedTickers:0)};c._handleAF=function(a){c._rafActive=!1;c._setupTick();a-c._lastTime>=c._interval-
1&&c._tick()};c._handleTimeout=function(){c.timeoutID=null;c._setupTick();c._tick()};c._setupTick=function(){if(!(c._rafActive||null!=c.timeoutID)){if(c.useRAF){var a=g.requestAnimationFrame||g.webkitRequestAnimationFrame||g.mozRequestAnimationFrame||g.oRequestAnimationFrame||g.msRequestAnimationFrame;if(a){a(c._handleAF,c.animationTarget);c._rafActive=!0;return}}c.timeoutID=setTimeout(c._handleTimeout,c._interval)}};c._tick=function(){c._ticks++;var a=c._getTime(),b=a-c._lastTime,i=c._paused;i&&
(c._pausedTickers++,c._pausedTime+=b);c._lastTime=a;for(var n=c._pauseable,d=c._listeners.slice(),f=d?d.length:0,e=0;e<f;e++){var h=d[e];null==h||i&&n[e]||(h.tick?h.tick(b,i):h instanceof Function&&h(b,i))}for(c._tickTimes.unshift(c._getTime()-a);100<c._tickTimes.length;)c._tickTimes.pop();for(c._times.unshift(a);100<c._times.length;)c._times.pop()};c._getTime=function(){return(new Date).getTime()};g.Ticker=c})(window);(function(g){var c=function(){this.initialize()},a=c.prototype={};a._handlers=null;a.initialize=function(){this._handlers={}};a.addEventListener=function(b,i,a){i={handler:i,context:a};this.hasEventListener(b)?this._handlers[b].push(i):this._handlers[b]=[i]};a.removeEventListener=function(b,i){var a=this._handlers[b];if(0===a.length)delete a;else for(var d=0;d<a.length;d++)a[d].handler===i&&a.splice(d,1)};a.removeAllListeners=function(b){b?delete this._handlers[b]:this._handlers={}};a.hasEventListener=
function(b){return!!this._handlers[b]};a.dispatchEvent=function(b){for(var i=(this._handlers[b.type]||[]).concat(this._handlers[Event.ALL]||[]),a=0;a<i.length;a++)b.target=this,i[a].handler.call(i[a].context||null,b)};g.EventDispatcher=c})(window);(function(g){var c=function(b,i){this.initialize(b,i)},a=c.prototype=new EventDispatcher;a.delay=null;a.repeatCount=0;a.currentCount=0;a.running=!1;a._startTime=null;c._timers=[];a.EventDispatcher_initialize=a.initialize;a.initialize=function(b,i){this.EventDispatcher_initialize();this.delay=b;this.repeatCount=i||0;c._timers.push(this)};a.reset=function(){this.stop();this.currentCount=0};a.start=function(){if(!this.running&&(this.currentCount!==this.repeatCount||0===this.repeatCount))this._startTime=
Ticker.getTime(),this.running=!0};a.stop=function(){this.running&&(this.running=!1)};a.tick=function(){if(this.running){var b=Math.floor((Ticker.getTime()-this._startTime)/this.delay);b!==this.currentCount&&(this.currentCount=b,this.currentCount===this.repeatCount&&0!==this.repeatCount&&(this.stop(),this.dispatchEvent(new TimerEvent(TimerEvent.TIMER_COMPLETE))),this.dispatchEvent(new TimerEvent(TimerEvent.TIMER)))}};c.tick=function(){for(var b=0;b<c._timers.length;b++)c._timers[b].tick()};Ticker.addListener(c);
g.Timer=c})(window);(function(g){var c=function(b){this.initialize(b)},a=c.prototype=new EventDispatcher;a.target=null;a.type=null;c.ALL="all";c.ADDED_TO_STAGE="addedToStage";c.REMOVED_FROM_STAGE="removedFromStage";c.ENTER_FRAME="enterFrame";c.EXIT_FRAME="exitFrame";a.EventDispatcher_initialize=a.initialize;a.initialize=function(b){this.EventDispatcher_initialize();this.type=b};a.clone=function(){return new c(this.type)};a.toString=function(){return"[Event (type="+this.type+")]"};g.Event=c})(window);(function(g){var c=function(b,i){this.initialize(b,i)},a=c.prototype=new Event;a.nativeEvent=null;a.Event_initialize=a.initialize;a.initialize=function(b,i){this.Event_initialize(b);this.nativeEvent=i};a.clone=function(){return new c(this.type)};a.toString=function(){return"[NativeEvent (type="+this.type+")]"};g.NativeEvent=c})(window);(function(g){var c=function(b){this.initialize(b)},a=c.prototype=new Event;c.TIMER="timer";c.TIMER_COMPLETE="timerComplete";a.Event_initialize=a.initialize;a.initialize=function(b){this.Event_initialize(b)};a.clone=function(){return new c(this.type)};a.toString=function(){return"[TimerEvent (type="+this.type+")]"};g.TimerEvent=c})(window);(function(g){var c=function(b,i,a,d){this.initialize(b,i,a,d)},a=c.prototype=new NativeEvent;a.stageX=0;a.stageY=0;c.CLICK="click";c.DOUBLE_CLICK="doubleClick";c.MOUSE_DOWN="mouseDown";c.MOUSE_UP="mouseUp";c.MOUSE_MOVE="mouseMove";c.ROLL_OVER="rollOver";c.ROLL_OUT="rollOut";a.NativeEvent_initialize=a.initialize;a.initialize=function(b,i,a,d){this.NativeEvent_initialize(b,d);this.stageX=i;this.stageY=a};a.clone=function(){return new c(this.type,this.stageX,this.stageY,this.nativeEvent)};a.toString=
function(){return"[MouseEvent (type="+this.type+" stageX="+this.stageX+" stageY="+this.stageY+")]"};g.MouseEvent=c})(window);(function(g){var c=function(b,i,a,d,c,e,h){this.initialize(b,i,a,d,c,e,h)},a=c.prototype=new NativeEvent;a.keyCode=0;a.charCode=0;a.altKey=!1;a.ctrlKey=!1;a.shiftKey=!1;c.KEY_DOWN="keyDown";c.KEY_UP="keyUp";a.NativeEvent_initialize=a.initialize;a.initialize=function(b,i,a,d,c,e,h){this.NativeEvent_initialize(b,h);this.keyCode=i;this.charCode=a;this.ctrlKey=d;this.altKey=c;this.shiftKey=e};a.clone=function(){return new c(this.type,this.keyCode,this.charCode,this.ctrlKey,this.altKey,this.shiftKey)};
a.toString=function(){return"[KeyboardEvent (type="+this.type+" keyCode="+this.keyCode+")]"};g.KeyboardEvent=c})(window);(function(g){var c=function(b,i,a,d,c,e){this.initialize(b,i,a,d,c,e)},a=c.prototype;c.identity=null;c.DEG_TO_RAD=Math.PI/180;a.a=1;a.b=0;a.c=0;a.d=1;a.tx=0;a.ty=0;a.alpha=1;a.shadow=null;a.compositeOperation=null;a.initialize=function(b,i,a,d,c,e){null!=b&&(this.a=b);this.b=i||0;this.c=a||0;null!=d&&(this.d=d);this.tx=c||0;this.ty=e||0;return this};a.prepend=function(b,i,a,d,c,e){var h=this.tx;if(1!=b||0!=i||0!=a||1!=d){var k=this.a,l=this.c;this.a=k*b+this.b*a;this.b=k*i+this.b*d;this.c=l*b+this.d*
a;this.d=l*i+this.d*d}this.tx=h*b+this.ty*a+c;this.ty=h*i+this.ty*d+e;return this};a.append=function(b,i,a,d,c,e){var h=this.a,k=this.b,l=this.c,j=this.d;this.a=b*h+i*l;this.b=b*k+i*j;this.c=a*h+d*l;this.d=a*k+d*j;this.tx=c*h+e*l+this.tx;this.ty=c*k+e*j+this.ty;return this};a.prependMatrix=function(b){this.prepend(b.a,b.b,b.c,b.d,b.tx,b.ty);this.prependProperties(b.alpha,b.shadow,b.compositeOperation);return this};a.appendMatrix=function(b){this.append(b.a,b.b,b.c,b.d,b.tx,b.ty);this.appendProperties(b.alpha,
b.shadow,b.compositeOperation);return this};a.prependTransform=function(b,i,a,d,f,e,h,k,l){if(f%360)var j=f*c.DEG_TO_RAD,f=Math.cos(j),j=Math.sin(j);else f=1,j=0;if(k||l)this.tx-=k,this.ty-=l;e||h?(e*=c.DEG_TO_RAD,h*=c.DEG_TO_RAD,this.prepend(f*a,j*a,-j*d,f*d,0,0),this.prepend(Math.cos(h),Math.sin(h),-Math.sin(e),Math.cos(e),b,i)):this.prepend(f*a,j*a,-j*d,f*d,b,i);return this};a.appendTransform=function(b,i,a,d,f,e,h,k,l){if(f%360)var j=f*c.DEG_TO_RAD,f=Math.cos(j),j=Math.sin(j);else f=1,j=0;e||
h?(e*=c.DEG_TO_RAD,h*=c.DEG_TO_RAD,this.append(Math.cos(h),Math.sin(h),-Math.sin(e),Math.cos(e),b,i),this.append(f*a,j*a,-j*d,f*d,0,0)):this.append(f*a,j*a,-j*d,f*d,b,i);if(k||l)this.tx-=k*this.a+l*this.c,this.ty-=k*this.b+l*this.d;return this};a.rotate=function(b){var i=Math.cos(b),b=Math.sin(b),a=this.a,d=this.c,c=this.tx;this.a=a*i-this.b*b;this.b=a*b+this.b*i;this.c=d*i-this.d*b;this.d=d*b+this.d*i;this.tx=c*i-this.ty*b;this.ty=c*b+this.ty*i;return this};a.skew=function(b,i){b*=c.DEG_TO_RAD;i*=
c.DEG_TO_RAD;this.append(Math.cos(i),Math.sin(i),-Math.sin(b),Math.cos(b),0,0);return this};a.scale=function(b,i){this.a*=b;this.d*=i;this.tx*=b;this.ty*=i;return this};a.translate=function(b,i){this.tx+=b;this.ty+=i;return this};a.identity=function(){this.alpha=this.a=this.d=1;this.b=this.c=this.tx=this.ty=0;this.shadow=this.compositeOperation=null;return this};a.invert=function(){var b=this.a,i=this.b,a=this.c,d=this.d,c=this.tx,e=b*d-i*a;this.a=d/e;this.b=-i/e;this.c=-a/e;this.d=b/e;this.tx=(a*
this.ty-d*c)/e;this.ty=-(b*this.ty-i*c)/e;return this};a.isIdentity=function(){return 0==this.tx&&0==this.ty&&1==this.a&&0==this.b&&0==this.c&&1==this.d};a.decompose=function(b){null==b&&(b={});b.x=this.tx;b.y=this.ty;b.scaleX=Math.sqrt(this.a*this.a+this.b*this.b);b.scaleY=Math.sqrt(this.c*this.c+this.d*this.d);var i=Math.atan2(-this.c,this.d),a=Math.atan2(this.b,this.a);i==a?(b.rotation=a/c.DEG_TO_RAD,0>this.a&&0<=this.d&&(b.rotation+=0>=b.rotation?180:-180),b.skewX=b.skewY=0):(b.skewX=i/c.DEG_TO_RAD,
b.skewY=a/c.DEG_TO_RAD);return b};a.reinitialize=function(b,i,a,d,c,e,h,k,l){this.initialize(b,i,a,d,c,e);this.alpha=h||1;this.shadow=k;this.compositeOperation=l;return this};a.appendProperties=function(b,i,a){this.alpha*=b;this.shadow=i||this.shadow;this.compositeOperation=a||this.compositeOperation;return this};a.prependProperties=function(b,i,a){this.alpha*=b;this.shadow=this.shadow||i;this.compositeOperation=this.compositeOperation||a;return this};a.clone=function(){var b=new c(this.a,this.b,
this.c,this.d,this.tx,this.ty);b.shadow=this.shadow;b.alpha=this.alpha;b.compositeOperation=this.compositeOperation;return b};a.toString=function(){return"[Matrix2D (a="+this.a+" b="+this.b+" c="+this.c+" d="+this.d+" tx="+this.tx+" ty="+this.ty+")]"};c.identity=new c(1,0,0,1,0,0);g.Matrix2D=c})(window);(function(g){var c=function(b,i){this.initialize(b,i)},a=c.prototype;a.x=0;a.y=0;a.initialize=function(b,i){this.x=null==b?0:b;this.y=null==i?0:i};a.clone=function(){return new c(this.x,this.y)};a.toString=function(){return"[Point (x="+this.x+" y="+this.y+")]"};g.Point=c})(window);(function(g){var c=function(b,i,a,d){this.initialize(b,i,a,d)},a=c.prototype;a.x=0;a.y=0;a.width=0;a.height=0;a.initialize=function(b,i,a,d){this.x=null==b?0:b;this.y=null==i?0:i;this.width=null==a?0:a;this.height=null==d?0:d};a.clone=function(){return new c(this.x,this.y,this.width,this.height)};a.toString=function(){return"[Rectangle (x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+")]"};g.Rectangle=c})(window);(function(g){var c=function(b,i,a,d){this.initialize(b,i,a,d)},a=c.prototype;c.identity=null;a.color=null;a.offsetX=0;a.offsetY=0;a.blur=0;a.initialize=function(b,i,a,d){this.color=b;this.offsetX=i;this.offsetY=a;this.blur=d};a.toString=function(){return"[Shadow]"};a.clone=function(){return new c(this.color,this.offsetX,this.offsetY,this.blur)};c.identity=new c("transparent",0,0,0);g.Shadow=c})(window);(function(g){var c=function(b){this.initialize(b)},a=c.prototype;a.complete=!0;a.onComplete=null;a._animations=null;a._frames=null;a._images=null;a._data=null;a._loadCount=0;a._frameHeight=0;a._frameWidth=0;a._numFrames=0;a._regX=0;a._regY=0;a.initialize=function(b){var i,a,d;if(null!=b){if(b.images&&0<(a=b.images.length)){d=this._images=[];for(i=0;i<a;i++){var c=b.images[i];if("string"==typeof c){var e=c,c=new Image;c.src=e}d.push(c);!c.getContext&&!c.complete&&(this._loadCount++,this.complete=!1,
function(b){c.onload=function(){b._handleImageLoad()}}(this))}}if(null!=b.frames)if(b.frames instanceof Array){this._frames=[];d=b.frames;i=0;for(a=d.length;i<a;i++)e=d[i],this._frames.push({image:this._images[e[4]?e[4]:0],rect:new Rectangle(e[0],e[1],e[2],e[3]),regX:e[5]||0,regY:e[6]||0})}else a=b.frames,this._frameWidth=a.width,this._frameHeight=a.height,this._regX=a.regX||0,this._regY=a.regY||0,this._numFrames=a.count,0==this._loadCount&&this._calculateFrames();if(null!=(a=b.animations)){this._animations=
[];this._data={};for(var h in a){b={name:h};e=a[h];if(isNaN(e))if(e instanceof Array){b.frequency=e[3];b.next=e[2];d=b.frames=[];for(i=e[0];i<=e[1];i++)d.push(i)}else b.frequency=e.frequency,b.next=e.next,i=e.frames,d=b.frames=!isNaN(i)?[i]:i.slice(0);else d=b.frames=[e];b.next=2>d.length||!1==b.next?null:null==b.next||!0==b.next?h:b.next;b.frequency||(b.frequency=1);this._animations.push(h);this._data[h]=b}}}};a.getNumFrames=function(b){if(null==b)return this._frames?this._frames.length:this._numFrames;
b=this._data[b];return null==b?0:b.frames.length};a.getAnimations=function(){return this._animations.slice(0)};a.getAnimation=function(b){return this._data[b]};a.getFrame=function(b){return this.complete&&this._frames&&(frame=this._frames[b])?frame:null};a.toString=function(){return"[SpriteSheet]"};a.clone=function(){var b=new c;b.complete=this.complete;b._animations=this._animations;b._frames=this._frames;b._images=this._images;b._data=this._data;b._frameHeight=this._frameHeight;b._frameWidth=this._frameWidth;
b._numFrames=this._numFrames;b._loadCount=this._loadCount;return b};a._handleImageLoad=function(){0==--this._loadCount&&(this._calculateFrames(),this.complete=!0,this.onComplete&&this.onComplete())};a._calculateFrames=function(){if(!(this._frames||0==this._frameWidth)){this._frames=[];for(var b=0,i=this._frameWidth,a=this._frameHeight,d=0,c=this._images;d<c.length;d++){for(var e=c[d],h=(e.width+1)/i|0,k=(e.height+1)/a|0,k=0<this._numFrames?Math.min(this._numFrames-b,h*k):h*k,l=0;l<k;l++)this._frames.push({image:e,
rect:new Rectangle(l%h*i,(l/h|0)*a,i,a),regX:this._regX,regY:this._regY});b+=k}this._numFrames=b}};g.SpriteSheet=c})(window);(function(g){function c(b,a,d){this.f=b;this.params=a;this.path=null==d?!0:d}c.prototype.exec=function(b){this.f.apply(b,this.params)};var a=function(){this.initialize()},b=a.prototype;a.getRGB=function(b,a,d,c){null!=b&&null==d&&(c=a,d=b&255,a=b>>8&255,b=b>>16&255);return null==c?"rgb("+b+","+a+","+d+")":"rgba("+b+","+a+","+d+","+c+")"};a.getHSL=function(b,a,d,c){return null==c?"hsl("+b%360+","+a+"%,"+d+"%)":"hsla("+b%360+","+a+"%,"+d+"%,"+c+")"};a.BASE_64={A:0,B:1,C:2,D:3,E:4,F:5,G:6,H:7,I:8,J:9,
K:10,L:11,M:12,N:13,O:14,P:15,Q:16,R:17,S:18,T:19,U:20,V:21,W:22,X:23,Y:24,Z:25,a:26,b:27,c:28,d:29,e:30,f:31,g:32,h:33,i:34,j:35,k:36,l:37,m:38,n:39,o:40,p:41,q:42,r:43,s:44,t:45,u:46,v:47,w:48,x:49,y:50,z:51,"0":52,1:53,2:54,3:55,4:56,5:57,6:58,7:59,8:60,9:61,"+":62,"/":63};a.STROKE_CAPS_MAP=["butt","round","square"];a.STROKE_JOINTS_MAP=["miter","round","bevel"];a._ctx=document.createElement("canvas").getContext("2d");a.beginCmd=new c(a._ctx.beginPath,[],!1);a.fillCmd=new c(a._ctx.fill,[],!1);a.strokeCmd=
new c(a._ctx.stroke,[],!1);b._strokeInstructions=null;b._strokeStyleInstructions=null;b._fillInstructions=null;b._instructions=null;b._oldInstructions=null;b._activeInstructions=null;b._drawnShapes=null;b._drawingPosition=null;b._initialDrawingPosition=null;b._active=!1;b._dirty=!1;b.initialize=function(){this.clear();this._ctx=a._ctx};b.draw=function(b){this._dirty&&this._updateInstructions();for(var a=this._instructions,d=0,c=a.length;d<c;d++)a[d].exec(b)};b.drawAsPath=function(b){this._dirty&&
this._updateInstructions();for(var a,d=this._instructions,c=0,e=d.length;c<e;c++)((a=d[c]).path||0==c)&&a.exec(b)};b.moveTo=function(b,a){this._setDrawingPosition(b,a);this._activeInstructions.push(new c(this._ctx.moveTo,[b,a]));return this};b.lineTo=function(b,a){if(null!=this._drawingPosition){var d=this._drawingPosition.x,f=this._drawingPosition.y,e=Math.min(d,b),h=Math.min(f,a),d=Math.max(d,b),f=Math.max(f,a);this._drawnShapes.push(new Rectangle(e,h,d-e,f-h))}this._setDrawingPosition(b,a);this._dirty=
this._active=!0;this._activeInstructions.push(new c(this._ctx.lineTo,[b,a]));return this};b.arcTo=function(b,a,d,f,e){this._dirty=this._active=!0;this._activeInstructions.push(new c(this._ctx.arcTo,[b,a,d,f,e]));return this};b.arc=function(b,a,d,f,e,h){null==h&&(h=!1);var k=new Point(b+d*Math.cos(f),a+d*Math.sin(f)),l=new Point(b+d*Math.cos(e),a+d*Math.sin(e));if(h)var j=l,l=k,k=j;var j=Math.min(k.x,l.x),g=Math.min(k.y,l.y),m=Math.max(k.x,l.x),o=Math.max(k.y,l.y),k=m-j,m=o-g,o=Math.round(k),r=Math.round(m);
oy=0;0==o&&0==r?(k=m=2*d,j-=2*d,g-=d):0==o?k=d:0==r&&(m=d);this._drawnShapes.push(new Rectangle(j,g,k,m));this._setDrawingPosition(l.x,l.y);this._dirty=this._active=!0;this._activeInstructions.push(new c(this._ctx.arc,[b,a,d,f,e,h]));return this};b.quadraticCurveTo=function(b,a,d,f){if(null!=this._drawingPosition){for(var e=this._drawingPosition.x,h=this._drawingPosition.y,k=[new Point(e,h),new Point(d,f)],l=this._computeBezierCubicBaseValue,j=this._computeBezierQuadraticDerivative,g=[j(e,b,d),j(h,
a,f)],j=0;j<g.length;j++)isFinite(g[j])&&(0<=g[j]&&1>=g[j])&&k.push(new Point(l(g[j],e,b,d),l(g[j],h,a,f)));e=maxX=k[0].x;h=maxY=k[0].y;for(j=1;j<k.length;j++)if(k[j].x>maxX&&(maxX=k[j].x),k[j].y>maxY&&(maxY=k[j].y),k[j].x<e&&(e=k[j].x),k[j].y<h)h=k[j].y;this._drawnShapes.push(new Rectangle(e,h,maxX-e,maxY-h))}this._setDrawingPosition(d,f);this._dirty=this._active=!0;this._activeInstructions.push(new c(this._ctx.quadraticCurveTo,[b,a,d,f]));return this};b.bezierCurveTo=function(b,a,d,f,e,h){if(null!=
this._drawingPosition){for(var k=this._drawingPosition.x,l=this._drawingPosition.y,j=[new Point(k,l),new Point(e,h)],g=this._computeBezierCubicBaseValue,m=this._computeBezierCubicDerivative,o=m(k,b,d,e).concat(m(l,a,f,h)),m=0;m<o.length;m++)isFinite(o[m])&&(0<=o[m]&&1>=o[m])&&j.push(new Point(g(o[m],k,b,d,e),g(o[m],l,a,f,h)));k=maxX=j[0].x;l=maxY=j[0].y;for(m=1;m<j.length;m++)if(j[m].x>maxX&&(maxX=j[m].x),j[m].y>maxY&&(maxY=j[m].y),j[m].x<k&&(k=j[m].x),j[m].y<l)l=j[m].y;this._drawnShapes.push(new Rectangle(k,
l,maxX-k,maxY-l))}this._setDrawingPosition(e,h);this._dirty=this._active=!0;this._activeInstructions.push(new c(this._ctx.bezierCurveTo,[b,a,d,f,e,h]));return this};b.rect=function(b,a,d,f){this._drawnShapes.push(new Rectangle(b,a,d,f));this._setDrawingPosition(b,a);this._dirty=this._active=!0;this._activeInstructions.push(new c(this._ctx.rect,[b,a,d,f]));return this};b.closePath=function(){this._active&&(this._dirty=!0,this._setDrawingPosition(this._initialDrawingPosition.x,this._initialDrawingPosition.y),
this._activeInstructions.push(new c(this._ctx.closePath,[])));return this};b.clear=function(){this._drawnShapes=[];this._instructions=[];this._oldInstructions=[];this._activeInstructions=[];this._strokeStyleInstructions=this._strokeInstructions=this._fillInstructions=this._drawingPosition=this._initialDrawingPosition=null;this._active=this._dirty=!1;return this};b.beginFill=function(b){this._active&&this._newPath();this._fillInstructions=b?[new c(this._setProp,["fillStyle",b],!1)]:null;return this};
b.beginLinearGradientFill=function(b,a,d,f,e,h){this._active&&this._newPath();d=this._ctx.createLinearGradient(d,f,e,h);f=0;for(e=b.length;f<e;f++)d.addColorStop(a[f],b[f]);this._fillInstructions=[new c(this._setProp,["fillStyle",d],!1)];return this};b.beginRadialGradientFill=function(b,a,d,f,e,h,k,l){this._active&&this._newPath();d=this._ctx.createRadialGradient(d,f,e,h,k,l);f=0;for(e=b.length;f<e;f++)d.addColorStop(a[f],b[f]);this._fillInstructions=[new c(this._setProp,["fillStyle",d],!1)];return this};
b.beginBitmapFill=function(b,a){this._active&&this._newPath();var d=this._ctx.createPattern(b,a||"");this._fillInstructions=[new c(this._setProp,["fillStyle",d],!1)];return this};b.endFill=function(){return this.beginFill()};b.setStrokeStyle=function(b,n,d,f){this._active&&this._newPath();this._strokeStyleInstructions=[new c(this._setProp,["lineWidth",null==b?"1":b],!1),new c(this._setProp,["lineCap",null==n?"butt":isNaN(n)?n:a.STROKE_CAPS_MAP[n]],!1),new c(this._setProp,["lineJoin",null==d?"miter":
isNaN(d)?d:a.STROKE_JOINTS_MAP[d]],!1),new c(this._setProp,["miterLimit",null==f?"10":f],!1)];return this};b.beginStroke=function(b){this._active&&this._newPath();this._strokeInstructions=b?[new c(this._setProp,["strokeStyle",b],!1)]:null;return this};b.beginLinearGradientStroke=function(b,a,d,f,e,h){this._active&&this._newPath();d=this._ctx.createLinearGradient(d,f,e,h);f=0;for(e=b.length;f<e;f++)d.addColorStop(a[f],b[f]);this._strokeInstructions=[new c(this._setProp,["strokeStyle",d],!1)];return this};
b.beginRadialGradientStroke=function(b,a,d,f,e,h,k,l){this._active&&this._newPath();d=this._ctx.createRadialGradient(d,f,e,h,k,l);f=0;for(e=b.length;f<e;f++)d.addColorStop(a[f],b[f]);this._strokeInstructions=[new c(this._setProp,["strokeStyle",d],!1)];return this};b.beginBitmapStroke=function(b,a){this._active&&this._newPath();var d=this._ctx.createPattern(b,a||"");this._strokeInstructions=[new c(this._setProp,["strokeStyle",d],!1)];return this};b.endStroke=function(){this.beginStroke();return this};
b.curveTo=b.quadraticCurveTo;b.drawRect=b.rect;b.drawRoundRect=function(b,a,d,c,e){this.drawRoundRectComplex(b,a,d,c,e,e,e,e);return this};b.drawRoundRectComplex=function(b,a,d,f,e,h,k,l){this._drawnShapes.push(new Rectangle(b,a,d,f));this._setDrawingPosition(b+e,a);var j=Math.PI,g=this._ctx.arc,m=this._ctx.lineTo;this._dirty=this._active=!0;this._activeInstructions.push(new c(this._ctx.moveTo,[b+e,a]),new c(m,[b+d-h,a]),0<=h?new c(g,[b+d-h,a+h,h,-j/2,0]):new c(g,[b+d,a,-h,j,j/2,!0]),new c(m,[b+d,
a+f-k]),0<=l?new c(g,[b+d-k,a+f-k,k,0,j/2]):new c(g,[b+d,a+f,-k,-j/2,j,!0]),new c(m,[b+l,a+f]),0<=l?new c(g,[b+l,a+f-l,l,j/2,j]):new c(g,[b,a+f,-l,0,-j/2,!0]),new c(m,[b,a+e]),0<=e?new c(g,[b+e,a+e,e,j,-j/2]):new c(g,[b,a,-e,j/2,0,!0]));return this};b.drawCircle=function(b,a,d){this.arc(b,a,d,0,2*Math.PI);return this};b.drawEllipse=function(b,a,d,f){this._drawnShapes.push(new Rectangle(b,a,d,f));this._setDrawingPosition(b,a+f/2);var e=0.5522848*(d/2),h=0.5522848*(f/2),k=b+d,l=a+f,d=b+d/2,f=a+f/2;
this._dirty=this._active=!0;this._activeInstructions.push(new c(this._ctx.moveTo,[b,f]),new c(this._ctx.bezierCurveTo,[b,f-h,d-e,a,d,a]),new c(this._ctx.bezierCurveTo,[d+e,a,k,f-h,k,f]),new c(this._ctx.bezierCurveTo,[k,f+h,d+e,l,d,l]),new c(this._ctx.bezierCurveTo,[d-e,l,b,f+h,b,f]));return this};b.drawPolyStar=function(b,a,d,f,e,h){null==e&&(e=0);e=1-e;h=null==h?0:h/(180/Math.PI);this._drawnShapes.push(new Rectangle(b-d,a-d,2*d,2*d));this._setDrawingPosition(b+d*Math.cos(h),a+d*Math.sin(h));var k=
Math.PI/f;this._dirty=this._active=!0;this._activeInstructions.push(new c(this._ctx.moveTo,[b+Math.cos(h)*d,a+Math.sin(h)*d]));for(var l=0;l<f;l++)h+=k,1!=e&&this._activeInstructions.push(new c(this._ctx.lineTo,[b+Math.cos(h)*d*e,a+Math.sin(h)*d*e])),h+=k,this._activeInstructions.push(new c(this._ctx.lineTo,[b+Math.cos(h)*d,a+Math.sin(h)*d]));return this};b.decodePath=function(b){for(var c=[this.moveTo,this.lineTo,this.quadraticCurveTo,this.bezierCurveTo],d=[2,2,4,6],f=0,e=b.length,h=[],k=0,l=0,j=
a.BASE_64;f<e;){var g=j[b.charAt(f)],m=g>>3,o=c[m];if(!o||g&3)throw"bad path data";var r=d[m];m||(k=l=0);h.length=0;f++;g=(g>>2&1)+2;for(m=0;m<r;m++){var q=j[b.charAt(f)],s=q>>5?-1:1,q=(q&31)<<6|j[b.charAt(f+1)];3==g&&(q=q<<6|j[b.charAt(f+2)]);q=s*q/10;m%2?k=q+=k:l=q+=l;h[m]=q;f+=g}o.apply(this,h)}return this};b.getBounds=function(){var b=this._drawnShapes.length;if(0===b)return new Rectangle;for(var a=this._drawnShapes,d=new Rectangle,c=0;c<b;c++){var e=a[c].x<d.x,h=a[c].x+a[c].width>d.x+d.width;
e&&h?(d.width+=a[c].x+a[c].width-(d.x+d.width),d.width+=d.x-a[c].x,d.x=a[c].x):e?(d.width+=d.x-a[c].x,d.x=a[c].x):h&&(d.width+=a[c].x+a[c].width-(d.x+d.width));e=a[c].y<d.y;h=a[c].y+a[c].height>d.y+d.height;e&&h?(d.height+=a[c].y+a[c].height-(d.y+d.height),d.height+=d.y-a[c].y,d.y=a[c].y):e?(d.height+=d.y-a[c].y,d.y=a[c].y):h&&(d.height+=a[c].y+a[c].height-(d.y+d.height))}this._drawnShapes=[d];return this._drawnShapes[0]};b.clone=function(){var b=new a;b._instructions=this._instructions.slice();b._activeInstructions=
this._activeInstructions.slice();b._oldInstructions=this._oldInstructions.slice();this._fillInstructions&&(b._fillInstructions=this._fillInstructions.slice());this._strokeInstructions&&(b._strokeInstructions=this._strokeInstructions.slice());this._strokeStyleInstructions&&(b._strokeStyleInstructions=this._strokeStyleInstructions.slice());b._active=this._active;b._dirty=this._dirty;b.drawAsPath=this.drawAsPath;return b};b.toString=function(){return"[Graphics]"};b.mt=b.moveTo;b.lt=b.lineTo;b.at=b.arcTo;
b.bt=b.bezierCurveTo;b.qt=b.quadraticCurveTo;b.a=b.arc;b.r=b.rect;b.cp=b.closePath;b.c=b.clear;b.f=b.beginFill;b.lf=b.beginLinearGradientFill;b.rf=b.beginRadialGradientFill;b.bf=b.beginBitmapFill;b.ef=b.endFill;b.ss=b.setStrokeStyle;b.s=b.beginStroke;b.ls=b.beginLinearGradientStroke;b.rs=b.beginRadialGradientStroke;b.bs=b.beginBitmapStroke;b.es=b.endStroke;b.dr=b.drawRect;b.rr=b.drawRoundRect;b.rc=b.drawRoundRectComplex;b.dc=b.drawCircle;b.de=b.drawEllipse;b.dp=b.drawPolyStar;b.p=b.decodePath;b._updateInstructions=
function(){this._instructions=this._oldInstructions.slice();this._instructions.push(a.beginCmd);this._fillInstructions&&this._instructions.push.apply(this._instructions,this._fillInstructions);this._strokeInstructions&&(this._instructions.push.apply(this._instructions,this._strokeInstructions),this._strokeStyleInstructions&&this._instructions.push.apply(this._instructions,this._strokeStyleInstructions));this._instructions.push.apply(this._instructions,this._activeInstructions);this._fillInstructions&&
this._instructions.push(a.fillCmd);this._strokeInstructions&&this._instructions.push(a.strokeCmd)};b._newPath=function(){this._dirty&&this._updateInstructions();this._oldInstructions=this._instructions;this._activeInstructions=[];this._active=this._dirty=!1;this._initialDrawingPosition=null};b._setDrawingPosition=function(b,a){null==this._initialDrawingPosition&&(this._initialDrawingPosition=new Point(b,a));this._drawingPosition=new Point(b,a)};b._computeBezierQuadraticBaseValue=function(b,a,c,f){var e=
1-b;return a*e*e+2*b*c*e+f*b*b};b._computeBezierQuadraticDerivative=function(b,a,c){return(b-a)/(b-2*a+c)};b._computeBezierCubicBaseValue=function(b,a,c,f,e){var h=1-b;return a*h*h*h+3*b*c*h*h+3*h*f*b*b+e*b*b*b};b._computeBezierCubicDerivative=function(b,a,c,f){var e=-b+2*a-c,h=Math.sqrt(-b*(c-f)+a*a-a*(c+f)+c*c),b=-b+3*a-3*c+f;return[(e+h)/b,(e-h)/b]};b._setProp=function(b,a){this[b]=a};g.Graphics=a})(window);(function(g){var c=function(){this.initialize()},a=c.prototype=new EventDispatcher;c.suppressCrossDomainErrors=!1;c._hitTestCanvas=document.createElement("canvas");c._hitTestCanvas.width=c._hitTestCanvas.height=1;c._hitTestContext=c._hitTestCanvas.getContext("2d");c._nextCacheID=1;a.alpha=1;a.cacheCanvas=null;a.id=-1;a.mouseEnabled=!0;a.name=null;a.parent=null;a.regX=0;a.regY=0;a.rotation=0;a.scaleX=1;a.scaleY=1;a.skewX=0;a.skewY=0;a.shadow=null;a.visible=!0;a.x=0;a.y=0;a.compositeOperation=null;
a.snapToPixel=!1;a.onTick=null;a.filters=null;a.cacheID=0;a.mask=null;a.hitArea=null;a.parentContainerInheritsSize=!0;a._cacheOffsetX=0;a._cacheOffsetY=0;a._cacheDataURLID=0;a._cacheDataURL=null;a._matrix=null;a.dragInfos=null;a.EventDispatcher_initialize=a.initialize;a.initialize=function(){this.EventDispatcher_initialize();this.id=UID.get();this._matrix=new Matrix2D};a.isVisible=function(){return this.visible&&0<this.alpha&&0!=this.scaleX&&0!=this.scaleY};a.draw=function(b,a){if(a||!this.cacheCanvas)return!1;
b.drawImage(this.cacheCanvas,this._cacheOffsetX,this._cacheOffsetY);return!0};a.updateContext=function(b){var a,c=this.mask;c&&c.graphics&&(a=c.getMatrix(c._matrix),b.transform(a.a,a.b,a.c,a.d,a.tx,a.ty),c.graphics.drawAsPath(b),b.clip(),a.invert(),b.transform(a.a,a.b,a.c,a.d,a.tx,a.ty));a=this._matrix.identity().appendTransform(this.x,this.y,this.scaleX,this.scaleY,this.rotation,this.skewX,this.skewY,this.regX,this.regY);Stage._snapToPixelEnabled&&this.snapToPixel?b.transform(a.a,a.b,a.c,a.d,a.tx+
0.5|0,a.ty+0.5|0):b.transform(a.a,a.b,a.c,a.d,a.tx,a.ty);b.globalAlpha*=this.alpha;this.compositeOperation&&(b.globalCompositeOperation=this.compositeOperation);this.shadow&&this._applyShadow(b,this.shadow)};a.cache=function(b,a,n,d){var f=this.cacheCanvas;null==f&&(f=this.cacheCanvas=document.createElement("canvas"));var e=f.getContext("2d");f.width=n;f.height=d;e.setTransform(1,0,0,1,-b,-a);e.clearRect(b,a,f.width,f.height);this.draw(e,!0,this._matrix.reinitialize(1,0,0,1,-b,-a));this._cacheOffsetX=
b;this._cacheOffsetY=a;this._applyFilters();this.cacheID=c._nextCacheID++};a.updateCache=function(b){var a=this.cacheCanvas,n=this._cacheOffsetX,d=this._cacheOffsetY;if(null==a)throw"cache() must be called before updateCache()";var f=a.getContext("2d");f.setTransform(1,0,0,1,-n,-d);b?f.globalCompositeOperation=b:f.clearRect(n,d,a.width,a.height);this.draw(f,!0);b&&(f.globalCompositeOperation="source-over");this._applyFilters();this.cacheID=c._nextCacheID++};a.uncache=function(){this._cacheDataURL=
this.cacheCanvas=null;this.cacheID=this._cacheOffsetX=this._cacheOffsetY=0};a.getCacheDataURL=function(){if(!this.cacheCanvas)return null;this.cacheID!=this._cacheDataURLID&&(this._cacheDataURL=this.cacheCanvas.toDataURL());return this._cacheDataURL};a.getStage=function(){for(var b=this;b.parent;)b=b.parent;return b instanceof Stage?b:null};a.localToGlobal=function(b,a){var c=this.getConcatenatedMatrix(this._matrix);if(null==c)return null;c.append(1,0,0,1,b,a);return new Point(c.tx,c.ty)};a.globalToLocal=
function(b,a){var c=this.getConcatenatedMatrix(this._matrix);if(null==c)return null;c.invert();c.append(1,0,0,1,b,a);return new Point(c.tx,c.ty)};a.localToLocal=function(b,a,c){b=this.localToGlobal(b,a);return c.globalToLocal(b.x,b.y)};a.setTransform=function(b,a,c,d,f,e,h,k,l){this.x=b||0;this.y=a||0;this.scaleX=null==c?1:c;this.scaleY=null==d?1:d;this.rotation=f||0;this.skewX=e||0;this.skewY=h||0;this.regX=k||0;this.regY=l||0};a.getMatrix=function(b){return(b?b.identity():new Matrix).appendTransform(this.x,
this.y,this.scaleX,this.scaleY,this.rotation,this.skewX,this.skewY,this.regX,this.regY).appendProperties(this.alpha,this.shadow,this.compositeOperation)};a.getConcatenatedMatrix=function(b){b?b.identity():b=new Matrix2D;for(var a=this;null!=a;)b.prependTransform(a.x,a.y,a.scaleX,a.scaleY,a.rotation,a.skewX,a.skewY,a.regX,a.regY).prependProperties(a.alpha,a.shadow,a.compositeOperation),a=a.parent;return b};a.getWidth=function(){if(this.nominalBounds)return this.nominalBounds.width;var b=new Matrix2D,
a=this._measureDimensions();b.appendTransform(this.x,this.y,this.scaleX,this.scaleY,this.rotation,this.skewX,this.skewY);return Math.abs(a.x*b.a+a.y*b.b)};a.getHeight=function(){if(this.nominalBounds)return this.nominalBounds.height;var b=new Matrix2D,a=this._measureDimensions();b.appendTransform(this.x,this.y,this.scaleX,this.scaleY,this.rotation,this.skewX,this.skewY);return Math.abs(a.x*b.c+a.y*b.d)};a.getSize=function(){if(this.nominalBounds)return{width:this.nominalBounds.width,height:this.nominalBounds.height};
var b=new Matrix2D,a=this._measureDimensions();b.appendTransform(this.x,this.y,this.scaleX,this.scaleY,this.rotation,this.skewX,this.skewY);return{width:Math.abs(a.x*b.a+a.y*b.b),height:Math.abs(a.x*b.c+a.y*b.d)}};a.getRawWidth=function(){return this._measureDimensions(!0).x};a.getRawHeight=function(){return this._measureDimensions(!0).y};a.getRawSize=function(){var b=this._measureDimensions(!0);return{width:b.x,height:b.y}};a.hitTest=function(b,a){var n=c._hitTestContext,d=c._hitTestCanvas;n.setTransform(1,
0,0,1,-b,-a);this.draw(n);n=this._testHit(n);d.width=0;d.width=1;return n};a.hitTestPoint=a.hitTest;a.hitTestObject=function(b){var a=this.parent.localToGlobal(this.x,this.y),c=b.parent.localToGlobal(b.x,b.y);return a.y+this.getHeight()<c.y||a.y>c.y+b.getHeight()||a.x+this.getWidth()<c.x||a.x>c.x+b.getWidth()?!1:!0};a.startDrag=function(b,a){var c=this.getStage();if(c){var d=this.parent.localToGlobal(this.x,this.y),f=c.mouseX,e=c.mouseY,h=b?0.5*this.getWidth():d.x,d=b?0.5*this.getHeight():d.y;if(b){var k=
this.parent.globalToLocal(f-h,e-d);this.x=k.x;this.y=k.y}c._activeDragTarget=this;this._dragInfos={lockCenter:b,bounds:a,startX:f,startY:e,offsetX:h,offsetY:d}}};a.stopDrag=function(){var b=this.getStage();b&&(this._dragInfos=b._activeDragTarget=null)};a.drag=function(b){var a=new Point,c=this._dragInfos,d=c.bounds;c.lockCenter?(a.x=b.stageX-c.offsetX,a.y=b.stageY-c.offsetY):(a.x=b.stageX-c.startX+c.offsetX,a.y=b.stageY-c.startY+c.offsetY);d&&((b=new Point(a.x,a.y),d.width<=this.getWidth()||d.height<=
this.getHeight())?(b.x>d.x?a.x=d.x:b.x+this.getWidth()<d.width&&(a.x=d.width-this.getWidth()),b.y>d.y)?a.y=d.y:b.y+this.getHeight()<d.height&&(a.y=d.height-this.getHeight()):(b.x<d.x?a.x=d.x:b.x+this.getWidth()>d.width&&(a.x=d.width-this.getWidth()),b.y<d.y)?a.y=d.y:b.y+this.getHeight()>d.height&&(a.y=d.height-this.getHeight()));a=this.parent.globalToLocal(a.x,a.y);this.x=a.x;this.y=a.y};a.clone=function(){var b=new c;this.cloneProps(b);return b};a.toString=function(){return"[DisplayObject (name="+
this.name+")]"};a.cloneProps=function(b){b.alpha=this.alpha;b.name=this.name;b.regX=this.regX;b.regY=this.regY;b.rotation=this.rotation;b.scaleX=this.scaleX;b.scaleY=this.scaleY;b.shadow=this.shadow;b.skewX=this.skewX;b.skewY=this.skewY;b.visible=this.visible;b.x=this.x;b.y=this.y;b.mouseEnabled=this.mouseEnabled;b.compositeOperation=this.compositeOperation;this.cacheCanvas&&(b.cacheCanvas=this.cacheCanvas.cloneNode(!0),b.cacheCanvas.getContext("2d").putImageData(this.cacheCanvas.getContext("2d").getImageData(0,
0,this.cacheCanvas.width,this.cacheCanvas.height),0,0))};a._applyShadow=function(b,a){a=a||Shadow.identity;b.shadowColor=a.color;b.shadowOffsetX=a.offsetX;b.shadowOffsetY=a.offsetY;b.shadowBlur=a.blur};a._tick=function(b){if(this.onTick)this.onTick(b)};a._testHit=function(b){try{var a=1<b.getImageData(0,0,1,1).data[3]}catch(n){if(!c.suppressCrossDomainErrors)throw"An error has occurred. This is most likely due to security restrictions on reading canvas pixel data with local or cross-domain images.";
}return a};a._applyFilters=function(){if(this.filters&&0!=this.filters.length&&this.cacheCanvas)for(var b=this.filters.length,a=this.cacheCanvas.getContext("2d"),c=this.cacheCanvas.width,d=this.cacheCanvas.height,f=0;f<b;f++)this.filters[f].applyFilter(a,0,0,c,d)};a._measureDimensions=function(){return new Point};g.DisplayObject=c})(window);(function(g){var c=function(){this.initialize()},a=c.prototype=new DisplayObject;a.children=null;a.DisplayObject_initialize=a.initialize;a.initialize=function(){this.DisplayObject_initialize();this.children=[]};a.isVisible=function(){return this.visible&&0<this.alpha&&this.children.length&&0!=this.scaleX&&0!=this.scaleY};a.DisplayObject_draw=a.draw;a.draw=function(b,a){if(this.DisplayObject_draw(b,a))return!0;for(var c=this.children.slice(0),d=0,f=c.length;d<f;d++){var e=c[d];e.isVisible()&&(b.save(),
e.updateContext(b),e.draw(b),b.restore())}return!0};a.dispatchEventToChildren=function(b){var a=this.children.length;if(0!==a)for(var c=this.children.slice(0),d=0;d<a;d++)c[d].dispatchEvent(b)};a.addChild=function(b){if(null==b)return b;var a=arguments.length;if(1<a){for(var n=0;n<a;n++)this.addChild(arguments[n]);return arguments[a-1]}b.parent&&b.parent.removeChild(b);b.parent=this;this.children.push(b);b.getStage()&&(a=new Event(Event.ADDED_TO_STAGE),b instanceof c&&b.dispatchEventToChildren(a),
b.dispatchEvent(a));return b};a.addChildAt=function(b,a){var n=arguments.length,d=arguments[n-1];if(0>d||d>this.children.length)return arguments[n-2];if(2<n){for(var f=0;f<n-1;f++)this.addChildAt(arguments[f],d+f);return arguments[n-2]}b.parent&&b.parent.removeChild(b);b.parent=this;this.children.splice(a,0,b);b.getStage()&&(n=new Event(Event.ADDED_TO_STAGE),b instanceof c&&b.dispatchEventToChildren(n),b.dispatchEvent(n));return b};a.removeChild=function(b){var a=arguments.length;if(1<a){for(var c=
!0,d=0;d<a;d++)c=c&&this.removeChild(arguments[d]);return c}return this.removeChildAt(this.children.indexOf(b))};a.removeChildAt=function(b){var a=arguments.length;if(1<a){for(var n=[],d=0;d<a;d++)n[d]=arguments[d];n.sort(function(b,a){return a-b});for(var f=!0,d=0;d<a;d++)f=f&&this.removeChildAt(n[d]);return f}if(0>b||b>this.children.length-1)return!1;if(a=this.children[b])a.getStage()&&(n=new Event(Event.REMOVED_FROM_STAGE),a instanceof c&&a.dispatchEventToChildren(n),a.dispatchEvent(n)),a.parent=
null;this.children.splice(b,1);return!0};a.removeAllChildren=function(){for(var b=this.children,a;b.length;){a=b.pop();if(a.getStage()){var n=new Event(Event.REMOVED_FROM_STAGE);a instanceof c&&a.dispatchEventToChildren(n);a.dispatchEvent(n)}b.parent=null}};a.getChildAt=function(b){return this.children[b]};a.sortChildren=function(b){this.children.sort(b)};a.getChildIndex=function(b){return this.children.indexOf(b)};a.getNumChildren=function(){return this.children.length};a.swapChildrenAt=function(b,
a){var c=this.children,d=c[b],f=c[a];d&&f&&(c[b]=f,c[a]=d)};a.swapChildren=function(b,a){for(var c=this.children,d,f,e=0,h=c.length;e<h&&!(c[e]==b&&(d=e),c[e]==a&&(f=e),null!=d&&null!=f);e++);e!=h&&(c[d]=a,c[f]=b)};a.setChildIndex=function(b,a){var c=this.children,d=c.length;if(!(b.parent!=this||0>a||a>=d)){for(var f=0;f<d&&c[f]!=b;f++);f==d||f==a||(c.splice(f,1),a<f&&a--,c.splice(a,0,b))}};a.contains=function(b){for(;b;){if(b==this)return!0;b=b.parent}return!1};a.hitTest=function(b,a){return null!=
this.getObjectUnderPoint(b,a)};a.getObjectsUnderPoint=function(b,a){var c=[],d=this.localToGlobal(b,a);this._getObjectsUnderPoint(d.x,d.y,c);return c};a.getObjectUnderPoint=function(b,a){var c=this.localToGlobal(b,a);return this._getObjectsUnderPoint(c.x,c.y)};a.clone=function(b){var a=new c;this.cloneProps(a);if(b)for(var n=a.children=[],d=0,f=this.children.length;d<f;d++){var e=this.children[d].clone(b);e.parent=a;n.push(e)}return a};a.toString=function(){return"[Container (name="+this.name+")]"};
a._tick=function(b){for(var a=this.children.length-1;0<=a;a--){var c=this.children[a];c._tick&&c._tick(b)}if(this.onTick)this.onTick(b)};a._getObjectsUnderPoint=function(b,a,n,d){var f=DisplayObject._hitTestContext,e=DisplayObject._hitTestCanvas,h=this._matrix,k=d&1&&(this.hasEventListener(MouseEvent.MOUSE_DOWN)||this.hasEventListener(MouseEvent.CLICK)||this.hasEventListener(MouseEvent.DOUBLE_CLICK))||d&2&&(this.hasEventListener(MouseEvent.ROLL_OVER)||this.hasEventListener(MouseEvent.ROLL_OUT));if(this.cacheCanvas&&
k&&(this.getConcatenatedMatrix(h),f.setTransform(h.a,h.b,h.c,h.d,h.tx-b,h.ty-a),f.globalAlpha=h.alpha,this.draw(f),this._testHit(f)))return e.width=0,e.width=1,this;for(var l=this.children.length-1;0<=l;l--){var j=this.children[l];if(j.isVisible()&&j.mouseEnabled)if(j instanceof c)if(k){if(j=j._getObjectsUnderPoint(b,a))return this}else{if(j=j._getObjectsUnderPoint(b,a,n,d),!n&&j)return j}else if(!d||k||d&1&&(j.hasEventListener(MouseEvent.MOUSE_DOWN)||j.hasEventListener(MouseEvent.CLICK)||j.hasEventListener(MouseEvent.DOUBLE_CLICK))||
d&2&&(j.hasEventListener(MouseEvent.ROLL_OVER)||j.hasEventListener(MouseEvent.ROLL_OUT))){var g=j.hitArea;j.getConcatenatedMatrix(h);g&&(h.appendTransform(g.x+j.regX,g.y+j.regY,g.scaleX,g.scaleY,g.rotation,g.skewX,g.skewY,g.regX,g.regY),h.alpha*=g.alpha/j.alpha);f.globalAlpha=h.alpha;f.setTransform(h.a,h.b,h.c,h.d,h.tx-b,h.ty-a);(g||j).draw(f);if(this._testHit(f)){e.width=0;e.width=1;if(k)return this;if(n)n.push(j);else return j}}}return null};c.prototype._measureDimensions=function(b){var a=this.children.length;
if(0===a)return new Point;for(var c=this.children.slice(0),d=new Rectangle,f=0;f<a;f++)c[f].parentContainerInheritsSize&&this._expandDimensionsFromObject(d,c[f],b);return new Point(d.width,d.height)};c.prototype._expandDimensionsFromObject=function(b,a,c){var d,f;d=a.x;var e=a.y,c=c?a.getRawSize():a.getSize();d-=a.regX;e-=a.regY;if(a instanceof Text){switch(a.textAlign){case "center":d-=0.5*c.width;break;case "right":case "end":d-=c.width}switch(a.textBaseline){case "middle":e+=0.5*c.height;break;
case "ideographic":case "bottom":case "alphabetic":e+=c.height}}a=d<b.x;f=d+c.width>b.x+b.width;a&&f?(b.width+=d+c.width-(b.x+b.width),b.width+=b.x-d,b.x=d):a?(b.width+=b.x-d,b.x=d):f&&(b.width+=d+c.width-(b.x+b.width));d=e<b.y;a=e+c.height>b.y+b.height;d&&a?(b.height+=e+c.height-(b.y+b.height),b.height+=b.y-e,b.y=e):d?(b.height+=b.y-e,b.y=e):a&&(b.height+=e+c.height-(b.y+b.height))};g.Container=c})(window);(function(g){var c=function(b){this.initialize(b)},a=c.prototype=new Container;c._snapToPixelEnabled=!1;a.autoClear=!0;a.canvas=null;a.mouseX=null;a.mouseY=null;a.snapToPixelEnabled=!1;a.mouseInBounds=!1;a.tickOnUpdate=!0;a._activeMouseEvent=null;a._activeMouseTarget=null;a._activeDragTarget=null;a._mouseOverIntervalID=null;a._mouseOverX=0;a._mouseOverY=0;a._mouseOverTarget=null;a.Container_initialize=a.initialize;a.initialize=function(b){this.Container_initialize();this.canvas=b instanceof HTMLCanvasElement?
b:document.getElementById(b);this._enableMouseEvents();this._enableKeyboardEvents()};a.update=function(b){this.canvas&&(this.hasEventListener(Event.ENTER_FRAME)&&this.dispatchEvent(new Event(Event.ENTER_FRAME)),this.autoClear&&this.clear(),c._snapToPixelEnabled=this.snapToPixelEnabled,this.tickOnUpdate&&this._tick(b),this.draw(this.canvas.getContext("2d"),!1,this.getConcatenatedMatrix(this._matrix)),this.hasEventListener(Event.EXIT_FRAME)&&this.dispatchEvent(new Event(Event.EXIT_FRAME)))};a.tick=
a.update;a.clear=function(){if(this.canvas){var b=this.canvas.getContext("2d");b.setTransform(1,0,0,1,0,0);b.clearRect(0,0,this.canvas.width,this.canvas.height)}};a.toDataURL=function(b,a){a||(a="image/png");var c=this.canvas.getContext("2d"),d=this.canvas.width,f=this.canvas.height,e;if(b){e=c.getImageData(0,0,d,f);var h=c.globalCompositeOperation;c.globalCompositeOperation="destination-over";c.fillStyle=b;c.fillRect(0,0,d,f)}var k=this.canvas.toDataURL(a);b&&(c.clearRect(0,0,d,f),c.putImageData(e,
0,0),c.globalCompositeOperation=h);return k};a.enableMouseOver=function(b){this._mouseOverIntervalID&&(clearInterval(this._mouseOverIntervalID),this._mouseOverIntervalID=null);if(null==b)b=20;else if(0>=b)return;var a=this;this._mouseOverIntervalID=setInterval(function(){a._testMouseOver()},1E3/Math.min(50,b));this._mouseOverX=NaN;this._mouseOverTarget=null};a.clone=function(){var b=new c(null);this.cloneProps(b);return b};a.toString=function(){return"[Stage (name="+this.name+")]"};a._measureDimensions=
function(){return new Point(this.canvas.width,this.canvas.height)};a._enableMouseEvents=function(){var b=this,a=g.addEventListener?g:document;a.addEventListener("mouseup",function(a){b._handleMouseUp(a)},!1);a.addEventListener("mousemove",function(a){b._handleMouseMove(a)},!1);a.addEventListener("dblclick",function(a){b._handleDoubleClick(a)},!1);this.canvas&&this.canvas.addEventListener("mousedown",function(a){b._handleMouseDown(a)},!1)};a._enableKeyboardEvents=function(){var b=this,a=g.addEventListener?
g:document;a.addEventListener("keyup",function(a){b._handleKeyUp(a)},!1);a.addEventListener("keydown",function(a){b._handleKeyDown(a)},!1)};a._handleKeyUp=function(b){this.hasEventListener(KeyboardEvent.KEY_UP)&&this.dispatchEvent(new KeyboardEvent(KeyboardEvent.KEY_UP,b.keyCode,b.charCode,b.ctrlKey,b.altKey,b.shiftKey,b))};a._handleKeyDown=function(b){this.hasEventListener(KeyboardEvent.KEY_DOWN)&&this.dispatchEvent(new KeyboardEvent(KeyboardEvent.KEY_DOWN,b.keyCode,b.charCode,b.ctrlKey,b.altKey,
b.shiftKey,b))};a._handleMouseMove=function(b){if(this.canvas){if(b||(b=g.event),this._updateMousePosition(b.pageX,b.pageY),this.mouseInBounds)b=new MouseEvent(MouseEvent.MOUSE_MOVE,this.mouseX,this.mouseY,b),this.hasEventListener(MouseEvent.MOUSE_MOVE)&&this.dispatchEvent(b),this._activeMouseEvent&&this._activeMouseEvent.hasEventListener(MouseEvent.MOUSE_MOVE)&&this._activeMouseEvent.dispatchEvent(b),this._activeDragTarget&&this._activeDragTarget.drag(b)}else this.mouseX=this.mouseY=null};a._updateMousePosition=
function(b,a){var c=this.canvas;do b-=c.offsetLeft,a-=c.offsetTop;while(c=c.offsetParent);if(this.mouseInBounds=0<=b&&0<=a&&b<this.canvas.width&&a<this.canvas.height)this.mouseX=b,this.mouseY=a};a._handleMouseUp=function(b){var a=new MouseEvent(MouseEvent.MOUSE_UP,this.mouseX,this.mouseY,b),b=new MouseEvent(MouseEvent.CLICK,this.mouseX,this.mouseY,b);this.hasEventListener(MouseEvent.MOUSE_UP)&&this.dispatchEvent(a);this.hasEventListener(MouseEvent.CLICK)&&this.dispatchEvent(b);this._activeMouseEvent&&
this._activeMouseEvent.hasEventListener(MouseEvent.MOUSE_UP)&&this._activeMouseEvent.dispatchEvent(a);this._activeMouseTarget&&(this._activeMouseTarget.hasEventListener(MouseEvent.CLICK)&&this._getObjectsUnderPoint(this.mouseX,this.mouseY,null,!0,this._mouseOverIntervalID?3:1)==this._activeMouseTarget)&&this._activeMouseTarget.dispatchEvent(b);this._activeMouseEvent=this._activeMouseTarget=null};a._handleMouseDown=function(b){b=new MouseEvent(MouseEvent.MOUSE_DOWN,this.mouseX,this.mouseY,b);this.hasEventListener(MouseEvent.MOUSE_DOWN)&&
(this.dispatchEvent(b),this._activeMouseEvent=b);var a=this._getObjectsUnderPoint(this.mouseX,this.mouseY,null,this._mouseOverIntervalID?3:1);a&&a!==this&&(a.hasEventListener(MouseEvent.MOUSE_DOWN)&&(a.dispatchEvent(b),this._activeMouseEvent=b),this._activeMouseTarget=a)};a._testMouseOver=function(){if(!(this.mouseX==this._mouseOverX&&this.mouseY==this._mouseOverY&&this.mouseInBounds)){var b=null;this.mouseInBounds&&(b=this._getObjectsUnderPoint(this.mouseX,this.mouseY,null,3),this._mouseOverX=this.mouseX,
this._mouseOverY=this.mouseY);this._mouseOverTarget!=b&&(this._mouseOverTarget&&this._mouseOverTarget.hasEventListener(MouseEvent.ROLL_OUT)&&this._mouseOverTarget.dispatchEvent(new MouseEvent(MouseEvent.ROLL_OUT,this.mouseX,this.mouseY,this._mouseOverTarget)),b&&b.hasEventListener(MouseEvent.ROLL_OVER)&&b.dispatchEvent(new MouseEvent(MouseEvent.ROLL_OVER,this.mouseX,this.mouseY,b)),this._mouseOverTarget=b)}};a._handleDoubleClick=function(b){this.hasEventListener(MouseEvent.DOUBLE_CLICK)&&this.dispatchEvent(new MouseEvent(MouseEvent.DOUBLE_CLICK,
this.mouseX,this.mouseY,b));var a=this._getObjectsUnderPoint(this.mouseX,this.mouseY,null,this._mouseOverIntervalID?3:1);a&&a.hasEventListener(MouseEvent.DOUBLE_CLICK)&&a.dispatchEvent(new MouseEvent(MouseEvent.DOUBLE_CLICK,this.mouseX,this.mouseY,b))};g.Stage=c})(window);(function(g){var c=function(b){this.initialize(b)},a=c.prototype=new DisplayObject;a.image=null;a.snapToPixel=!0;a.sourceRect=null;a.DisplayObject_initialize=a.initialize;a.initialize=function(b){this.DisplayObject_initialize();"string"==typeof b?(this.image=new Image,this.image.src=b):this.image=b};a.isVisible=function(){return this.visible&&0<this.alpha&&0!=this.scaleX&&0!=this.scaleY&&this.image&&(this.image.complete||this.image.getContext||2<=this.image.readyState)};a.DisplayObject_draw=a.draw;
a.draw=function(b,a){if(this.DisplayObject_draw(b,a))return!0;var c=this.sourceRect;c?b.drawImage(this.image,c.x,c.y,c.width,c.height,0,0,c.width,c.height):b.drawImage(this.image,0,0);return!0};a.clone=function(){var b=new c(this.image);this.cloneProps(b);return b};a.toString=function(){return"[Bitmap (name="+this.name+")]"};a._measureDimensions=function(){var b,a=this.image,c=this.sourceRect;if(!a)return new Point;if(c)return new Point(c.width,c.height);a instanceof HTMLImageElement?b=new Point(a.naturalWidth,
a.naturalHeight):a instanceof HTMLVideoElement&&(b=new Point(a.videoWidth,a.videoHeight));return b||new Point(a.width,a.height)};g.Bitmap=c})(window);(function(g){var c=function(b){this.initialize(b)},a=c.prototype=new DisplayObject;a.onAnimationEnd=null;a.currentFrame=-1;a.currentAnimation=null;a.paused=!0;a.spriteSheet=null;a.snapToPixel=!0;a.offset=0;a.currentAnimationFrame=0;a._advanceCount=0;a._animation=null;a.DisplayObject_initialize=a.initialize;a.initialize=function(b){this.DisplayObject_initialize();this.spriteSheet=b};a.isVisible=function(){return this.visible&&0<this.alpha&&0!=this.scaleX&&0!=this.scaleY&&this.spriteSheet.complete&&
0<=this.currentFrame};a.DisplayObject_draw=a.draw;a.draw=function(b,a){if(this.DisplayObject_draw(b,a))return!0;this._normalizeFrame();var c=this.spriteSheet.getFrame(this.currentFrame);if(null!=c){var d=c.rect;b.drawImage(c.image,d.x,d.y,d.width,d.height,-c.regX,-c.regY,d.width,d.height);return!0}};a.play=function(){this.paused=!1};a.stop=function(){this.paused=!0};a.gotoAndPlay=function(b){this.paused=!1;this._goto(b)};a.gotoAndStop=function(b){this.paused=!0;this._goto(b)};a.advance=function(){this._animation?
this.currentAnimationFrame++:this.currentFrame++;this._normalizeFrame()};a.clone=function(){var b=new c(this.spriteSheet);this.cloneProps(b);return b};a.toString=function(){return"[BitmapAnimation (name="+this.name+")]"};a._tick=function(b){var a=this._animation?this._animation.frequency:1;!this.paused&&0==(++this._advanceCount+this.offset)%a&&this.advance();if(this.onTick)this.onTick(b)};a._normalizeFrame=function(){var b=this._animation;if(b)if(this.currentAnimationFrame>=b.frames.length){if(b.next?
this._goto(b.next):(this.paused=!0,this.currentAnimationFrame=b.frames.length-1,this.currentFrame=b.frames[this.currentAnimationFrame]),this.onAnimationEnd)this.onAnimationEnd(this,b.name)}else this.currentFrame=b.frames[this.currentAnimationFrame];else if(this.currentFrame>=this.spriteSheet.getNumFrames()&&(this.currentFrame=0,this.onAnimationEnd))this.onAnimationEnd(this,null)};a.DisplayObject_cloneProps=a.cloneProps;a.cloneProps=function(b){this.DisplayObject_cloneProps(b);b.onAnimationEnd=this.onAnimationEnd;
b.currentFrame=this.currentFrame;b.currentAnimation=this.currentAnimation;b.paused=this.paused;b.offset=this.offset;b._animation=this._animation;b.currentAnimationFrame=this.currentAnimationFrame};a._goto=function(b){if(isNaN(b)){var a=this.spriteSheet.getAnimation(b);a&&(this.currentAnimationFrame=0,this._animation=a,this.currentAnimation=b,this._normalizeFrame())}else this.currentAnimation=this._animation=null,this.currentFrame=b};c.prototype._measureDimensions=function(){return new Point(this.spriteSheet._frameWidth,
this.spriteSheet._frameHeight)};g.BitmapAnimation=c})(window);(function(g){var c=function(b){this.initialize(b)},a=c.prototype=new DisplayObject;a.graphics=null;a.DisplayObject_initialize=a.initialize;a.initialize=function(b){this.DisplayObject_initialize();this.graphics=b?b:new Graphics};a.isVisible=function(){return this.visible&&0<this.alpha&&0!=this.scaleX&&0!=this.scaleY&&this.graphics};a.DisplayObject_draw=a.draw;a.draw=function(b,a){if(this.DisplayObject_draw(b,a))return!0;this.graphics.draw(b);return!0};a.clone=function(b){b=new c(b&&this.graphics?this.graphics.clone():
this.graphics);this.cloneProps(b);return b};a.toString=function(){return"[Shape (name="+this.name+")]"};a._measureDimensions=function(){var b=this.graphics.getBounds();return new Point(b.width,b.height)};g.Shape=c})(window);(function(g){var c=function(b,a,c){this.initialize(b,a,c)},a=c.prototype=new DisplayObject;c._workingContext=document.createElement("canvas").getContext("2d");a.text="";a.font=null;a.color=null;a.textAlign=null;a.textBaseline=null;a.maxWidth=null;a.outline=!1;a.lineHeight=0;a.lineWidth=null;a.DisplayObject_initialize=a.initialize;a.initialize=function(b,a,c){this.DisplayObject_initialize();this.text=b;this.font=a;this.color=c?c:"#000"};a.isVisible=function(){return Boolean(this.visible&&0<this.alpha&&
0!=this.scaleX&&0!=this.scaleY&&null!=this.text&&""!==this.text)};a.DisplayObject_draw=a.draw;a.draw=function(b,a){if(this.DisplayObject_draw(b,a))return!0;this.outline?b.strokeStyle=this.color:b.fillStyle=this.color;b.font=this.font;b.textAlign=this.textAlign||"start";b.textBaseline=this.textBaseline||"alphabetic";this._drawText(b);return!0};a.getMeasuredWidth=function(){return this._getWorkingContext().measureText(this.text).width};a.getMeasuredLineHeight=function(){return 1.2*this._getWorkingContext().measureText("M").width};
a.getMeasuredHeight=function(){return this._drawText()*(this.lineHeight||this.getMeasuredLineHeight())};a.getNumLines=function(){return(this.lineWidth?Math.ceil(this.getMeasuredWidth()/this.lineWidth):1)+this.text.split("\n").length-1};a.clone=function(){var b=new c(this.text,this.font,this.color);this.cloneProps(b);return b};a.toString=function(){return"[Text (text="+(20<this.text.length?this.text.substr(0,17)+"...":this.text)+")]"};a.DisplayObject_cloneProps=a.cloneProps;a.cloneProps=function(b){this.DisplayObject_cloneProps(b);
b.textAlign=this.textAlign;b.textBaseline=this.textBaseline;b.maxWidth=this.maxWidth;b.outline=this.outline;b.lineHeight=this.lineHeight;b.lineWidth=this.lineWidth};a._getWorkingContext=function(){var b=c._workingContext;b.font=this.font;b.textAlign=this.textAlign||"start";b.textBaseline=this.textBaseline||"alphabetic";return b};a._drawText=function(b){var a=!!b;a||(b=this._getWorkingContext());for(var c=(""+this.text).split(/(?:\r\n|\r|\n)/),d=this.lineHeight||this.getMeasuredLineHeight(),f=0,e=
0,h=c.length;e<h;e++){var k=b.measureText(c[e]).width;if(null==this.lineWidth||k<this.lineWidth)a&&this._drawTextLine(b,c[e],f*d);else{for(var k=c[e].split(/(\s)/),l=k[0],j=1,g=k.length;j<g;j+=2)b.measureText(l+k[j]+k[j+1]).width>this.lineWidth?(a&&this._drawTextLine(b,l,f*d),f++,l=k[j+1]):l+=k[j]+k[j+1];a&&this._drawTextLine(b,l,f*d)}f++}return f};a._drawTextLine=function(b,a,c){this.outline?b.strokeText(a,0,c,this.maxWidth||65535):b.fillText(a,0,c,this.maxWidth||65535)};a._measureDimensions=function(){return new Point(this.maxWidth||
this.lineWidth||this.getMeasuredWidth(),this.getNumLines()*(this.lineHeight||this.getMeasuredLineHeight()))};g.Text=c})(window);(function(g){var c=function(){throw"SpriteSheetUtils cannot be instantiated";};c._workingCanvas=document.createElement("canvas");c._workingContext=c._workingCanvas.getContext("2d");c.addFlippedFrames=function(a,b,i,g){if(b||i||g){var d=0;b&&c._flip(a,++d,!0,!1);i&&c._flip(a,++d,!1,!0);g&&c._flip(a,++d,!0,!0)}};c.extractFrame=function(a,b){isNaN(b)&&(b=a.getAnimation(b).frames[0]);var i=a.getFrame(b);if(!i)return null;var g=i.rect,d=c._workingCanvas;d.width=g.width;d.height=g.height;c._workingContext.drawImage(i.image,
g.x,g.y,g.width,g.height,0,0,g.width,g.height);i=new Image;i.src=d.toDataURL("image/png");return i};c._flip=function(a,b,i,g){for(var d=a._images,f=c._workingCanvas,e=c._workingContext,h=d.length/b,k=0;k<h;k++){var l=d[k];l.__tmp=k;f.width=l.width;f.height=l.height;e.setTransform(i?-1:1,0,0,g?-1:1,i?l.width:0,g?l.height:0);e.drawImage(l,0,0);var j=new Image;j.src=f.toDataURL("image/png");j.width=l.width;j.height=l.height;d.push(j)}e=a._frames;f=e.length/b;for(k=0;k<f;k++){var l=e[k],p=l.rect.clone(),
j=d[l.image.__tmp+h*b],m={image:j,rect:p,regX:l.regX,regY:l.regY};i&&(p.x=j.width-p.x-p.width,m.regX=p.width-l.regX);g&&(p.y=j.height-p.y-p.height,m.regY=p.height-l.regY);e.push(m)}i="_"+(i?"h":"")+(g?"v":"");g=a._animations;a=a._data;d=g.length/b;for(k=0;k<d;k++){e=g[k];l=a[e];h={name:e+i,frequency:l.frequency,next:l.next,frames:[]};l.next&&(h.next+=i);e=l.frames;l=0;for(j=e.length;l<j;l++)h.frames.push(e[l]+f*b);a[h.name]=h;g.push(h.name)}};g.SpriteSheetUtils=c})(window);(function(g){var c=function(){this.initialize()},a=c.prototype;c.ERR_DIMENSIONS="frame dimensions exceed max spritesheet dimensions";c.ERR_RUNNING="a build is already running";a.maxWidth=2048;a.maxHeight=2048;a.spriteSheet=null;a.scale=1;a._frames=null;a._animations=null;a._data=null;a._nextFrameIndex=0;a._index=0;a._callback=null;a._timeSlice=null;a._timerID=null;a._scale=1;a.initialize=function(){this._frames=[];this._animations={}};a.addFrame=function(b,a,g,d,f,e){if(this._data)throw c.ERR_RUNNING;
a=a||b.bounds||b.nominalBounds;!a&&b.getBounds&&(a=b.getBounds());if(!a)return null;g=g||1;return this._frames.push({source:b,sourceRect:a,scale:g,funct:d,params:f,scope:e,index:this._frames.length,height:a.height*g})-1};a.addAnimation=function(b,a,g,d){if(this._data)throw c.ERR_RUNNING;this._animations[b]={frames:a,next:g,frequency:d}};a.addMovieClip=function(b,a,g){if(this._data)throw c.ERR_RUNNING;var d=b.frameBounds,a=a||b.bounds||b.nominalBounds;!a&&b.getBounds&&(a=b.getBounds());if(!a&&!d)return null;
for(var f=b.timeline.duration,e=0;e<f;e++)this.addFrame(b,d&&d[e]?d[e]:a,g,function(a){var b=this.actionsEnabled;this.actionsEnabled=!1;this.gotoAndStop(a);this.actionsEnabled=b},[e],b);var b=b.timeline._labels,h;for(h in b)this.addAnimation(h,b[h],!0)};a.build=function(){if(this._data)throw c.ERR_RUNNING;this._callback=null;for(this._startBuild();this._drawNext(););this._endBuild();return this.spriteSheet};a.buildAsync=function(a,i){if(this._data)throw c.ERR_RUNNING;this._callback=a;this._startBuild();
this._timeSlice=50*Math.max(0.01,Math.min(0.99,i||0.3));var g=this;this._timerID=setTimeout(function(){g._run()},50-this._timeSlice)};a.stopAsync=function(){clearTimeout(this._timerID);this._data=null};a.clone=function(){throw"SpriteSheet cannot be cloned.";};a.toString=function(){return"[SpriteSheetBuilder]"};a._startBuild=function(){this.spriteSheet=null;this._index=0;this._scale=this.scale;var a=[];this._data={images:[],frames:a,animations:this._animations};var i=this._frames.slice();i.sort(function(a,
b){return a.height<=b.height?-1:1});if(i[i.length-1].height>this.maxHeight)throw c.ERR_DIMENSIONS;for(var g=1,d=1,f=0;i.length;){var e=this._fillRow(i,g,f,a);e.w>d&&(d=e.w);g+=e.h+2;if(!e.h||!i.length){var h=document.createElement("canvas");h.width=this._getSize(d,this.maxWidth);h.height=this._getSize(g,this.maxHeight);this._data.images[f]=h;e.h||(d=g=1,f++)}}};a._getSize=function(a,c){for(var g=4;Math.pow(2,++g)<a;);return Math.min(c,Math.pow(2,g))};a._fillRow=function(a,i,g,d){for(var f=this.maxWidth,
e=this.maxHeight-i,h=1,k=0,l=a.length-1;0<=l;l--){var j=a[l],p=this._scale*j.scale,m=j.sourceRect,o=j.source,r=Math.floor(p*m.x-1),q=Math.floor(p*m.y-1),s=Math.ceil(p*m.height),m=Math.ceil(p*m.width);if(m>f)throw c.ERR_DIMENSIONS;s>e||h+m>f||(j.img=g,j.rect=new Rectangle(h,i,m,s),k=k||s,a.splice(l,1),d[j.index]=[h-1,i-1,m+2,s+2,g,Math.round(-r+p*o.regX),Math.round(-q+p*o.regY)],h+=m+2)}return{w:h,h:k}};a._endBuild=function(){this.spriteSheet=new SpriteSheet(this._data);this._data=null;this._callback&&
this._callback(this)};a._run=function(){for(var a=(new Date).getTime()+this._timeSlice,c=!1;a>(new Date).getTime();)if(!this._drawNext()){c=!0;break}if(c)this._endBuild();else{var g=this;this._timerID=setTimeout(function(){g._run()},50-this._timeSlice)}};a._drawNext=function(){var a=this._frames[this._index],c=a.scale*this._scale,g=a.rect,d=a.sourceRect,f=this._data.images[a.img].getContext("2d");a.funct&&a.funct.apply(a.scope,a.params);f.save();f.beginPath();f.rect(g.x-1,g.y-1,g.width+2,g.height+
2);f.clip();f.translate(g.x-d.x*c+0.5|0,g.y-d.y*c+0.5|0);f.scale(c,c);a.source.draw(f);f.restore();return++this._index<this._frames.length};g.SpriteSheetBuilder=c})(window);(function(g){var c=function(a){this.initialize(a)},a=c.prototype=new DisplayObject;a.htmlElement=null;a._style=null;a.DisplayObject_initialize=a.initialize;a.initialize=function(a){"string"==typeof a&&(a=document.getElementById(a));this.DisplayObject_initialize();this.mouseEnabled=!1;if(this.htmlElement=a)this._style=a.style,this._style.position="absolute",this._style.transformOrigin=this._style.webkitTransformOrigin=this._style.msTransformOrigin=this._style.MozTransformOrigin="0% 0%"};a.isVisible=
function(){return null!=this.htmlElement};a.draw=function(){if(null!=this.htmlElement){var a=this.getConcatenatedMatrix(this._matrix),c=this.htmlElement;c.style.opacity=""+a.alpha;c.style.visibility=this.visible?"visible":"hidden";c.style.transform=c.style.webkitTransform=c.style.oTransform=c.style.msTransform=["matrix("+a.a,a.b,a.c,a.d,a.tx,a.ty+")"].join();c.style.MozTransform=["matrix("+a.a,a.b,a.c,a.d,a.tx+"px",a.ty+"px)"].join();return!0}};a.cache=function(){};a.uncache=function(){};a.updateCache=
function(){};a.hitTest=function(){};a.localToGlobal=function(){};a.globalToLocal=function(){};a.localToLocal=function(){};a.clone=function(){var a=new c;this.cloneProps(a);return a};a.toString=function(){return"[DOMElement (name="+this.name+")]"};a._tick=function(a){if(null!=this.htmlElement&&(this.htmlElement.style.visibility="hidden",this.onTick))this.onTick(a)};g.DOMElement=c})(window);(function(g){var c=function(){this.initialize()},a=c.prototype;a.initialize=function(){};a.getBounds=function(){return new Rectangle(0,0,0,0)};a.applyFilter=function(){};a.toString=function(){return"[Filter]"};a.clone=function(){return new c};g.Filter=c})(window);(function(g){var c=function(){throw"Touch cannot be instantiated";};c.isSupported=function(){return"ontouchstart"in g};c.enable=function(a){null!=a&&c.isSupported()&&(a._primaryTouchId=-1,a._handleTouchMoveListener=null,a.canvas.addEventListener("touchstart",function(b){c._handleTouchStart(a,b)},!1),document.addEventListener("touchend",function(b){c._handleTouchEnd(a,b)},!1))};c._handleTouchStart=function(a,b){b.preventDefault();if(-1==a._primaryTouchId){a._handleTouchMoveListener=a._handleTouchMoveListener||
function(b){c._handleTouchMove(a,b)};document.addEventListener("touchmove",a._handleTouchMoveListener,!1);var g=b.changedTouches[0];a._primaryTouchId=g.identifier;a._updateMousePosition(g.pageX,g.pageY);a._handleMouseDown(g)}};c._handleTouchMove=function(a,b){var g=c._findPrimaryTouch(a,b.changedTouches);g&&a._handleMouseMove(g)};c._handleTouchEnd=function(a,b){var g=c._findPrimaryTouch(a,b.changedTouches);g&&(a._primaryTouchId=-1,a._handleMouseUp(g),document.removeEventListener("touchmove",a._handleTouchMoveListener),
a._handleTouchMoveListener=null)};c._findPrimaryTouch=function(a,b){for(var c=b.length,g=0;g<c;g++){var d=b[g];if(d.identifier==a._primaryTouchId)return d}return null};g.Touch=c})(window);(function(g){g.Keyboard={BACKSPACE:8,CAPS_LOCK:20,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,F1:112,F10:121,F11:122,F12:123,F13:124,F14:125,F15:126,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,HOME:36,INSERT:45,LEFT:37,NUMPAD_0:96,NUMPAD_1:97,NUMPAD_2:98,NUMPAD_3:99,NUMPAD_4:100,NUMPAD_5:101,NUMPAD_6:102,NUMPAD_7:103,NUMPAD_8:104,NUMPAD_9:105,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,
RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,"0":48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90}})(window);
